<!DOCTYPE html>
<html>

<head>
  <title>js_深拷贝</title>
  <meta charset="utf-8">
  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
    }
  </style>
</head>

<body>
  <div>

  </div>

  <script type="text/javascript">
    ////////////////深拷贝函数
    var obj = {
      name: "nn",
      age: "18",
      friends: ["松松", "二萍"],
      goodFriend: {
        name: "joy",
        age: "11",
        sex: "female",
        love: [{ name: "雪糕" }, { name: "土豆" }],
      },
      birthday: new Date(),
      height: undefined,
      wy: function a() { console.log("我是一个函数"); },
      hname: {
        jk: NaN,
        age: Infinity,
        mey: -Infinity
      },
      reg: new RegExp('/我是一个正则/ig'),
      err: new Error('我是一个错误')
    }
    var newObj = JSON.parse(JSON.stringify(obj));
    newObj.name = "ss";
    newObj.goodFriend.name = "merry";
    console.log(obj);
    console.log(newObj);
    //总结：


    //扩展运算符深拷贝数组
    let arr = [1, 2, 3, 4, 5];
    let newArr = [...arr];
    arr.push(7);
    console.log(arr, newArr);


    //递归深拷贝
    var obj = {
      key: "one"
    };
    var obj1 = {};

    console.log(Object.assign(obj1,obj));
    // function deepCopy(obj) {
    //   if (obj == null || typeof obj != 'object') return obj;
    //   // var target = obj instanceof Array ? [] : {};
    //   var target = (obj.constructor === Array ? [] : {});  //两种方式等价
    //   for (var i in obj) {
    //     target[i] = deepCopy(obj[i]);
    //   }
    //   return target;
    // }

    // obj.key1 = ["谢谢", "对不起"];
    // var result = deepCopy(obj);
    // result.key1.push("再见");
    // console.log(result.key1);//["谢谢", "对不起", "再见"]
    // console.log(obj.key1);// ["谢谢", "对不起"]


    // function deepCopy(obj){
    //   if(obj===null||typeof obj != 'object')return obj;
    //   var target = obj instanceof Array ? []:{};
    //   for(var i in obj){
    //     target[i] = deepCopy(obj[i]);
    //   }
    //   return target;
    // }

    


  </script>
</body>

</html>